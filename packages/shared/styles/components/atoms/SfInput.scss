@import "../../helpers";

.sf-input {
  position: relative;
  box-sizing: border-box;
  width: var(--input-width);
  height: var(--input-height);
  color: var(--input-color, var(--c-text));

  &__label {
    position: absolute;
    top: var(--input-label-top, 50%);
    color: var(--input-label-color, inherit);
    left: var(--input-label-left, 0);
    transform: var(
      --input-label-transform,
      translate3d(0, calc(var(--input-label-top, 50%) * -1), 0)
    );
    transition: var(
      --input-label-transition,
      top 150ms linear,
      font-size 150ms linear,
      left 150ms linear
    );
    &::after {
      content: var(--input-label-required);
      color: var(--input-label-color, var(--c-primary));
    }
    @include font(
      --input-label-font,
      var(--font-weight-regular),
      var(--font-size-regular),
      normal,
      var(--body-font-family-secondary)
    );
  }
  &__bar {
    position: relative;
    display: block;
    &::before,
    &::after {
      position: absolute;
      bottom: 0;
      width: var(--input-bar-width, 0);
      height: 1px;
      background: var(--input-bar-background, var(--c-primary));
      transition: width 150ms linear;
      content: "";
    }
    &::before {
      left: 50%;
    }
    &::after {
      right: 50%;
    }
  }

  &__error-message {
    color: var(--input-error-message-color, var(--c-danger));
    @include font(--input-error-message-font, var(--font-weight-regular), var(--font-size-small), 1.6, var(--body-font-family-secondary));
  }

  &__wrapper,
  input {
    width: 100%;
    height: 100%;
  }

  &__wrapper {
    position: relative;
    margin: var(--input-margin, 0 0 var(--spacer-small) 0);
  }

  input {
    display: block;
    box-sizing: border-box;
    padding: var(--input-padding, var(--spacer-small) 0 var(--spacer-extra-small) 0);
    @include border(--input-border, 0 0 1px 0, solid, var(--c-light));
    background: var(--input-background);
    color: inherit;
    @include font(
      --input-font,
      var(--font-weight-regular),
      var(--font-size-big),
      normal,
      var(--body-font-family-secondary)
    );
    outline: none;
    &:focus {
      & ~ * {
        --input-label-top: 0;
        --input-label-color: var(--c-primary);
        --input-label-font-size: var(--font-size-extra-small);
        --input-bar-width: 50%;
      }
    }
    &:required {
      & ~ * {
        --input-label-required: " *";
      }
    }
    &:disabled {
      & ~ * {
        --input-color: var(--c-text-muted);
        --input-label-color: var(--c-text-muted);
      }
    }
    &[type="number"] {
      &::-webkit-inner-spin-button,
      &::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
    }
  }

  &__password-button,
  .sf-icon {
    --button-padding: 0;
    --button-background: transparent;
    position: absolute;
    top: var(--input-icon-top, 50%);
    right: var(--input-icon-right, var(--spacer-extra-small));
    left: var(--input-icon-left);
    transform: translate3d(0, -50%, 0);
    transition: all 150ms linear;
    &:hover {
      --button-background: transparent;
    }
  }

  &__password-icon {
    --icon-width: var(--input-password-icon-width, 1.375rem);
    --icon-height: var(--input-password-icon-height, 0.8125rem);
    position: relative;
    
    &--hidden {
      --input-password-icon-scaleX: 1;
    }
    &::after {
      position: absolute;
      top: 50%;
      width: 100%;
      height: 1px;
      background: var(--input-password-icon-background, var(--c-gray-variant));
      transform: translate3d(0, -50%, 0) rotate(45deg)
        scaleX(var(--input-password-icon-scaleX, 0));
      transition: transform 150ms linear;
      content: "";
    }
  }

  &--has-text {
    --input-label-top: 0;
    --input-label-font-size: var(--font-size-extra-small);
  }

  &--with-icon {
    --icon-size: 12px;
    --input-padding: var(--spacer-small)
    calc(var(--spacer-small) * 2 + var(--input-password-icon-width, 1.375rem))
    var(--spacer-extra-small) 0;
    --icon-color: var(--c-dark-variant);
    input {
      &:focus {
        & ~ * {
          --icon-color: var(--c-primary);
          --input-password-icon-background: var(--c-primary);
        }
      }
      &:disabled {
        & ~ * {
          --icon-color: var(--text-muted);
        }
      }
    }
    &-left {
      --input-padding: var(--spacer-small) var(--spacer-small) var(--spacer-extra-small) calc(var(--spacer-extra-small)*2);
      --input-icon-left: 0;
      --input-label-left: var(--spacer-small);
      
      input {
        &:focus {
          --input-padding: var(--spacer-small) 0 var(--spacer-extra-small) 0;
          & ~ * {
            --icon-size: 0.5rem;
            --input-icon-top: var(--spacer-extra-small);
            --input-label-left: var(--spacer-small);
          }
        }
      }
    }
  }
}
